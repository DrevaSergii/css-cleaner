"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const postcss_1=__importDefault(require("postcss")),postcss_merge_longhand_1=__importDefault(require("postcss-merge-longhand")),postcss_sorting_1=__importDefault(require("postcss-sorting")),reader_1=__importDefault(require("./modules/reader")),writer_1=__importDefault(require("./modules/writer")),discard_duplicates_1=__importDefault(require("./plugins/discard-duplicates"));class default_1{constructor(e){this.reader=new reader_1.default,this.writer=new writer_1.default,this.plugins=[discard_duplicates_1.default,postcss_merge_longhand_1.default,postcss_sorting_1.default(e.sort)]}stylesReducer(e){return e.map(e=>{const t=postcss_1.default(this.plugins).process(e.style);return e.style=t.css,e})}clean(e){return this.reader.read(e).then(e=>this.stylesReducer(e)).then(e=>this.writer.write(e))}}exports.default=default_1;